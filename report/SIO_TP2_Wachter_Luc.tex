% Preamble
% ---
\documentclass[paper=a4, fontsize=11pt]{scrartcl}

% Packages =========================================================================
% ---
\usepackage{geometry}
\geometry{
  a4paper,
  total={170mm,257mm},
  left=20mm,
  right=20mm,
  top=30mm,
  bottom=35mm,
}
\usepackage[utf8]{inputenc}   % UTF-8 support
\usepackage[french]{babel}
\usepackage{amsmath,amsfonts} % Advanced math typesetting
\usepackage{listings}         % Source code formatting and highlighting
\usepackage{lastpage}         % Reference to last page
\usepackage[parfill]{parskip} % No indent at start of new line
\usepackage{color}
  \definecolor{codegreen}{rgb}{0,0.6,0}
  \definecolor{codegray}{rgb}{0.5,0.5,0.5}
  \definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\usepackage{fancyhdr}         % Create headers and footers
	\pagestyle{fancy}

% Create horizontal rule command with 1 argument of height
\newcommand{\horrule}[1]{\rule{\linewidth}{#1}}

% Title page things ================================================================
\title{
  \normalfont \normalsize
  \textsc{HEIG-VD - Simulation et Optimisation} \\[10pt]
  \horrule{1pt} \\[0.4cm] % Thin top horizontal rule
  \huge Travail Pratique 2~:\\Méthode de Monte-Carlo \\
  \horrule{2pt} \\[0.4cm] % Thick bottom horizontal rule
}
\author{Luc \bsc{Wachter}}
\date{28 mai 2019}

% Header and footer things =========================================================
\renewcommand{\footrulewidth}{0.4pt}
\lhead{SIO - Travail pratique 2}
\rhead{Luc Wachter}
\lfoot{28.05.2019}
\cfoot{}
\rfoot{Page \thepage \ sur \pageref{LastPage}}

% Style for code listings ==========================================================
\lstdefinestyle{codestyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    numberstyle=\tiny\color{codegray},
    basicstyle=\footnotesize,
    breakatwhitespace=true,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2
}
\lstset{style=codestyle}

% Document =========================================================================
% ---
\begin{document}

% Set language for code listings
\lstset{language=Java}

\maketitle

% Début Section ==================================================================
\section{Introduction}

Si vous ne le savez pas, c'est que vous n'êtes pas prêts.

- Commenter les résultats de la simulation, normalement le code est bien documenté et apparait peu dans le rapport

- Pas de tables des matières / figures, pas de page de garde

- Rédaction scientifique : Tables et graphiques AVEC légendes avec numéro (pour référencement), décrit avec précision

- Protocole utilisé pour obtenir les résultats

- Rappeler les définitions des symboles

- Aller jusqu'à 7 décimales au maximum

- Ne pas mélanger les différentes formes d'écriture (décimales ou $E^x$)

- Taille police 11

- Numéro de page

- Texte justifié

- Titre

-  "Article scientifique"

\newpage

% Début Section ==================================================================
\section{Approche utilisée}

Je fais ça.

% Début Section ==================================================================
\section{Correspondance des symboles}

Les symboles mathématiques proposés dans la donnée du travail ne sont bien sûr pas propice à une utilisation en Java. Voici donc un

% Début Section ==================================================================
\section{Choix du nombre d'expériences à effectuer}

Après avoir lancé la simulation pour exécuter $N_{init}$ expériences, il nous faut estimer le nombre d'expériences supplémentaires nécessaires pour arriver à un intervalle de confiance à 95\% dont la demi-largeur ne dépasse pas $\Delta_{max}$.

Ce nombre d'expériences $n$ peut être estimé en utilisant l'équation pour la largeur de l'intervalle de confiance~:
\begin{equation*}
  \Delta_{I_c} = 2\cdot z_{1-\frac{\alpha}{2}}\cdot \dfrac{s}{\sqrt{n}}
\end{equation*}

Adaptons cette équation pour notre cas pratique en remplaçant la largeur de l'intervalle de confiance $\Delta_{Ic}$ par la demi-largeur maximale $\Delta_{max}$ (constante donnée par le code appelant). Ce changement nous permet de faire fi du facteur deux du côté droit de l'équation, puisque nous nous intéressons à la demi-largeur et non à la largeur complète.
\begin{equation*}
  \Delta_{max} = z_{1-\frac{\alpha}{2}}\cdot \dfrac{s}{\sqrt{n}}
\end{equation*}

Il nous suffit alors d'isoler $n$ pour déterminer la formule à utiliser dans notre programme.
\begin{align*}
  &\Delta_{max} = z_{1-\frac{\alpha}{2}}\cdot \dfrac{s}{\sqrt{n}} \\ \\
  \Rightarrow &\ \sqrt{n} = \dfrac{z_{1-\frac{\alpha}{2}}\cdot s}{\Delta_{I_c}} \\ \\
  \Rightarrow &\ n = \dfrac{z_{1-\frac{\alpha}{2}}^2\cdot s^2}{\Delta_{I_c}^2}
\end{align*}

En utilisant $1.959964$ comme quantile de la loi normale et avec l'estimateur $s$ de l'écart-type calculé empiriquement avec nos expériences initiales, il nous est donc possible d'estimer un nombre d'expériences nécessaires pour arriver à la précision voulue.

% Début Section ==================================================================
\section{Résultats}

Qualité de l'estimation ???

\subsection{Distribution des estimateurs ponctuels }

\subsection{Couverture empirique des intervalles de confiance}

Afin d'analyser la couverture des intervalles de confiance calculés, la valeur exacte de $\text{E}(D)$ nous est donnée.
\begin{align*}
  \text{E}(D) &= \int _0^1\int _0^1\int _0^1\int _0^1\sqrt{\:\left(x_2-x_1\right)^2+\left(y_2-y_1\right)^2}dy_2dy_1dx_2dx_1 \\ \\
  &= \dfrac{2 + \sqrt{2} + 5\ln{\sqrt{2} + 1}}{15} \\ \\
  &\approx 0,5214054
\end{align*}

\textit{Insérer ici graphique de fou de la slide 52}

% Début Section ==================================================================
\section{Conclusion}

C'était \textbf{trivial}.

\end{document}
